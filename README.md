# T2 Mobile - CRM & Client Portal (Electron App)

## Описание

T2 Mobile - это десктопное приложение, разработанное с использованием Electron, React и Node.js. Оно представляет собой CRM-систему для управления клиентами, пакетами услуг и продажами, а также личный кабинет для клиентов. Приложение использует SQLite для хранения данных.

## Функционал

### Основные возможности
*   Десктопное приложение (Windows, macOS, Linux - требует проверки сборки)
*   Разделение ролей: Администратор и Клиент
*   Аутентификация (Регистрация/Вход) с использованием JWT и хеширования паролей (bcrypt)
*   Интерфейс на базе React и Material UI

### Функции Администратора
*   **Дашборд:** Просмотр статистики продаж (общая выручка, количество продаж, статистика по пакетам и месяцам).
*   **Управление клиентами:**
    *   Просмотр списка клиентов.
    *   Добавление новых клиентов (автоматически создается связанный пользовательский аккаунт с временным паролем).
    *   Просмотр детальной информации о клиенте (включая дату регистрации и последней покупки).
    *   Редактирование данных клиента.
    *   Удаление клиентов.
*   **Управление продажами:**
    *   Просмотр списка всех продаж с информацией о клиенте и пакете.
    *   Добавление новой продажи для существующего клиента.
*   **Сброс пароля:** Возможность сбросить пароль для любого пользователя (генерируется новый временный пароль).
*   **Настройки:** (Раздел для будущих настроек приложения)

### Функции Клиента (Личный кабинет)
*   **Профиль:**
    *   Просмотр своих данных (имя, email, телефон).
    *   Редактирование своих данных.
*   **Управление пакетом:**
    *   Просмотр текущего (последнего купленного) пакета услуг.
    *   Переход на страницу выбора и покупки нового пакета.
*   **История покупок:** Просмотр списка всех своих покупок с датами и названиями пакетов.
*   **Настройки аккаунта:**
    *   Смена своего пароля (требуется ввод текущего пароля).
    *   Удаление своего аккаунта (с подтверждением).
*   **Настройки:** (Раздел для будущих настроек пользователя)

## Технологический стек

*   **Основа:** Electron
*   **Main Process (Backend Logic):** Node.js
*   **Renderer Process (Frontend):** React
*   **UI:** Material UI (MUI)
*   **База данных:** SQLite 3
*   **Аутентификация:** JWT (jsonwebtoken), bcrypt
*   **Маска ввода:** react-imask
*   **Хранилище настроек (Fallback):** electron-store

## Структура проекта

```
.
├── database/
│   ├── init_db.sql        # SQL-скрипт для инициализации/сброса БД
│   └── t2mobile.db        # Файл БД SQLite (создается автоматически)
├── src/
│   ├── renderer/          # Код React-приложения (frontend)
│   │   ├── components/    # Общие компоненты React (App, MenuItems, etc.)
│   │   ├── context/       # React Context API (AuthContext)
│   │   ├── pages/         # Компоненты страниц/разделов приложения
│   │   ├── assets/        # Статические ресурсы (изображения, шрифты - если есть)
│   │   ├── index.js       # Точка входа для рендерера
│   │   └── index.css      # Глобальные стили
│   └── preload.js         # Скрипт для безопасного взаимодействия main и renderer
├── build/                 # Папка со сборкой React-приложения (если используется)
├── dist/                  # Папка со сборкой Electron-приложения (если используется)
├── main.js                # Точка входа и основная логика Electron (main process)
├── package.json           # Зависимости и скрипты npm
├── package-lock.json      # Lock-файл зависимостей
├── webpack.config.js      # Конфигурация Webpack (если используется)
└── README.md              # Этот файл
```

## Установка и запуск

1.  **Клонируйте репозиторий:**
    ```bash
    git clone <repository-url>
    cd <repository-folder>
    ```
2.  **Установите зависимости:**
    ```bash
    npm install
    ```
3.  **Запуск в режиме разработки:**
    ```bash
    npm start
    ```
    При первом запуске (или если файл `t2mobile.db` отсутствует) будет автоматически создана база данных на основе скрипта `database/init_db.sql`.

4.  **Сборка приложения:**
    (Предполагается, что настроены скрипты для electron-builder или аналога в `package.json`)
    ```bash
    npm run make # или другая команда сборки
    ```

## Работа с базой данных

*   База данных SQLite хранится в файле `t2mobile.db` в корне проекта.
*   Для **сброса базы данных** к начальному состоянию (пустые таблицы пользователей/клиентов/продаж, заполненные пакеты):
    1.  Закройте приложение.
    2.  Удалите файл `t2mobile.db`.
    3.  Запустите приложение снова (`npm start`).
*   Структура базы данных и начальные данные пакетов определяются в `database/init_db.sql`.
